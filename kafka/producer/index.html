<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `producer` mod in crate `kafka`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, producer">

    <title>kafka::producer - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='../index.html'>kafka</a></p><script>window.sidebarCurrent = {name: 'producer', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Module <a href='../index.html'>kafka</a>::<wbr><a class='mod' href=''>producer</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-2280' class='srclink' href='../../src/kafka/src/producer.rs.html#1-739' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>Kafka Producer - A higher-level API for sending messages to Kafka
topics.</p>

<p>This module hosts a multi-topic capable producer for a Kafka
cluster providing a convenient API for sending messages
synchronously.</p>

<p>In Kafka, each message is a key/value pair where one or the other
is optional.  A <code>Record</code> represents all the data necessary to
produce such a message to Kafka using the <code>Producer</code>.  It
specifies the target topic and the target partition the message is
supposed to be delivered to as well as the key and the value.</p>

<h1 id='example' class='section-header'><a href='#example'>Example</a></h1>
<pre class='rust rust-example-rendered'>
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>fmt</span>::<span class='ident'>Write</span>;
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>time</span>::<span class='ident'>Duration</span>;
<span class='kw'>use</span> <span class='ident'>kafka</span>::<span class='ident'>producer</span>::{<span class='ident'>Producer</span>, <span class='ident'>Record</span>, <span class='ident'>RequiredAcks</span>};

<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>producer</span> <span class='op'>=</span>
    <span class='ident'>Producer</span>::<span class='ident'>from_hosts</span>(<span class='macro'>vec</span><span class='macro'>!</span>(<span class='string'>&quot;localhost:9092&quot;</span>.<span class='ident'>to_owned</span>()))
        .<span class='ident'>with_ack_timeout</span>(<span class='ident'>Duration</span>::<span class='ident'>from_secs</span>(<span class='number'>1</span>))
        .<span class='ident'>with_required_acks</span>(<span class='ident'>RequiredAcks</span>::<span class='ident'>One</span>)
        .<span class='ident'>create</span>()
        .<span class='ident'>unwrap</span>();

<span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>buf</span> <span class='op'>=</span> <span class='ident'>String</span>::<span class='ident'>with_capacity</span>(<span class='number'>2</span>);
<span class='kw'>for</span> <span class='ident'>i</span> <span class='kw'>in</span> <span class='number'>0</span>..<span class='number'>10</span> {
  <span class='kw'>let</span> _ <span class='op'>=</span> <span class='macro'>write</span><span class='macro'>!</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>buf</span>, <span class='string'>&quot;{}&quot;</span>, <span class='ident'>i</span>); <span class='comment'>// some computation of the message data to be sent</span>
  <span class='ident'>producer</span>.<span class='ident'>send</span>(<span class='kw-2'>&amp;</span><span class='ident'>Record</span>::<span class='ident'>from_value</span>(<span class='string'>&quot;my-topic&quot;</span>, <span class='ident'>buf</span>.<span class='ident'>as_bytes</span>())).<span class='ident'>unwrap</span>();
  <span class='ident'>buf</span>.<span class='ident'>clear</span>();
}</pre>

<p>In this example, when the <code>producer.send(..)</code> returns
successfully, we are guaranteed the message is delivered to Kafka
and persisted by at least one Kafka broker.  However, when sending
multiple messages just like in this example, it is more efficient
to send them in batches using <code>Producer::send_all</code>.</p>

<p>Since some of the <code>Record</code>s attributes are optional, convenience
methods exist to ease their creation.  In this example, the call
to <code>Record::from_value</code> creates a key-less, value-only record with
an unspecified partition.  The <code>Record</code> struct, however, is
intended to provide full control over its lifecycle to client
code, and, hence, is fully open.  Its current constructor methods
are provided for convience only.</p>

<p>Beside the target topic, key, and the value of a <code>Record</code>, client
code is allowed to specify the topic partition the message is
supposed to be delivered to.  If the partition of a <code>Record</code> is
not specified - more precisely speaking if it&#39;s negative -
<code>Producer</code> will rely on its underlying <code>Partitioner</code> to find a
suitable one.  A <code>Partitioner</code> implementation can be supplied by
client code at the <code>Producer</code>&#39;s construction time and defaults to
<code>DefaultPartitioner</code>.  See that for more information for its
strategy to find a partition.</p>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Reexports</a></h2>
<table><tr><td><code>pub use client::<a class='enum' href='../../kafka/client/enum.RequiredAcks.html' title='kafka::client::RequiredAcks'>RequiredAcks</a>;</code></td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Builder.html'
                                  title='kafka::producer::Builder'>Builder</a></td>
                           <td class='docblock short'>
                                <p>A Kafka Producer builder easing the process of setting up various
configuration settings.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.DefaultPartitioner.html'
                                  title='kafka::producer::DefaultPartitioner'>DefaultPartitioner</a></td>
                           <td class='docblock short'>
                                <p>As its name implies <code>DefaultPartitioner</code> is the default
partitioner for <code>Producer</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Partitions.html'
                                  title='kafka::producer::Partitions'>Partitions</a></td>
                           <td class='docblock short'>
                                <p>Producer relevant partition information of a particular topic.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Producer.html'
                                  title='kafka::producer::Producer'>Producer</a></td>
                           <td class='docblock short'>
                                <p>The Kafka Producer</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Record.html'
                                  title='kafka::producer::Record'>Record</a></td>
                           <td class='docblock short'>
                                <p>A structure representing a message to be sent to Kafka through the
<code>Producer</code> API.  Such a message is basically a key/value pair
specifying the target topic and optionally the topic&#39;s partition.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.Topics.html'
                                  title='kafka::producer::Topics'>Topics</a></td>
                           <td class='docblock short'>
                                <p>A description of available topics and their available partitions.</p>
                           </td>
                       </tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='enum' href='enum.Compression.html'
                                  title='kafka::producer::Compression'>Compression</a></td>
                           <td class='docblock short'>
                                <p>Compression types supported by kafka. The numeral values of this
enumeration correspond to the compression encoding in the
attributes of a Message in the protocol.</p>
                           </td>
                       </tr></table><h2 id='constants' class='section-header'><a href="#constants">Constants</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.DEFAULT_ACK_TIMEOUT_MILLIS.html'
                                  title='kafka::producer::DEFAULT_ACK_TIMEOUT_MILLIS'>DEFAULT_ACK_TIMEOUT_MILLIS</a></td>
                           <td class='docblock short'>
                                <p>The default value for <code>Builder::with_ack_timeout</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='constant' href='constant.DEFAULT_REQUIRED_ACKS.html'
                                  title='kafka::producer::DEFAULT_REQUIRED_ACKS'>DEFAULT_REQUIRED_ACKS</a></td>
                           <td class='docblock short'>
                                <p>The default value for <code>Builder::with_required_acks</code>.</p>
                           </td>
                       </tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.AsBytes.html'
                                  title='kafka::producer::AsBytes'>AsBytes</a></td>
                           <td class='docblock short'>
                                <p>A trait used by <code>Producer</code> to obtain the bytes <code>Record::key</code> and
<code>Record::value</code> represent.  This leaves the choice of the types
for <code>key</code> and <code>value</code> with the client.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='trait' href='trait.Partitioner.html'
                                  title='kafka::producer::Partitioner'>Partitioner</a></td>
                           <td class='docblock short'>
                                <p>A partitioner is given a chance to choose/redefine a partition for
a message to be sent to Kafka.  See also
<code>Record#with_partition</code>.</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "kafka";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script defer src="../../search-index.js"></script>
</body>
</html>